<!-- dollarId: issue.item,v 1.4 2001/08/03 01:19:43 richard Exp dollar-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>
Issue 91: OpenSolaris bug import code should only download the bug if our copy is more than a day old - Roundup issue tracker

</title>
<link rel="stylesheet" type="text/css" href="@@file/style.css">
<meta http-equiv="Content-Type"
      content="text/html; charset=utf-8" />

<script type="text/javascript">
submitted = false;
function submit_once() {
    if (submitted) {
        alert("Your request is being processed.\nPlease be patient.");
        event.returnValue = 0;    // work-around for IE
        return 0;
    }
    submitted = true;
    return 1;
}

function help_window(helpurl, width, height) {
    HelpWin = window.open('https://openhatch.org/bugs/' + helpurl, 'RoundupHelpWindow', 'scrollbars=yes,resizable=yes,toolbar=no,height='+height+',width='+width);
}
</script>



</head>
<body class="body">

<table class="body">

<tr>
 <td class="page-header-left"><a href="/" title="OpenHatch"><img src="/static/images/the-logo-bluegreen-87px.png" width="87" height="60" alt="openhatch" /></a></td>
 <td class="page-header-top">
   <div id="body-title">
     <h2>
 
 
 Issue91
 
</h2>
   </div>
   <div id="searchbox">
     <form method="GET" action="issue">
       <input type="hidden" name="@columns"
              value="id,activity,title,creator,assignedto,status,milestone" />
       <input type="hidden" name="@sort" value="activity" />
       <input type="hidden" name="@group" value="priority" />
       <input id="search-text" name="@search_text" size="10" />
       <input type="submit" id="submit" name="submit"
              value="Search" />
     </form>
  </div>
 </td>
</tr>

<tr>
 <td rowspan="2" valign="top" class="sidebar">
  

  <p class="classblock">
    <b>This month: 0.13.10</b><br>
    <a href="/wiki/0.13.10">Goals (in wiki)</a><br>
    <a href="milestone19?@template=open">Bug list</a>
  </p>

  <form method="POST" action="https://openhatch.org/bugs/">
   <p class="classblock">
    <b>Issues</b><br>
    
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@columns=id,activity,title,creator,status,milestone&amp;assignedto=-1&amp;@group=priority&amp;@dispname=Show Unassigned&amp;@filter=status,assignedto&amp;@pagesize=50&amp;@startwith=0">Show Unassigned</a><br>
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@dispname=Show All&amp;@filter=status&amp;@group=priority&amp;@columns=id,activity,title,creator,assignedto,status,milestone&amp;@pagesize=50&amp;@startwith=0">Show All</a><br>
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@columns=id,activity,title,creator,assignedto,status,milestone&amp;@dispname=Show Bitesized&amp;keyword=1&amp;@group=priority&amp;@filter=status,keyword&amp;@pagesize=50&amp;@startwith=0">Show Bitesized</a><br>
    <a href="issue?@template=search">Search</a><br>
    <input type="submit" class="form-small"
           value="Show issue:"><input class="form-small" size="4" type="text" name="@number">
    <input type="hidden" name="@type" value="issue">
    <input type="hidden" name="@action" value="show">
   </p>
  </form>

  

  

  

   <p class="userblock">
    <b>Login</b><br>
    <a href="https://openhatch.org/account/login/?next=/bugs/issue91">Click here to login.</a>
   </p>

  
  <p class="userblock">
   <b>Help</b><br>
   <a href="http://www.roundup-tracker.org/docs.html">Bug tracker docs</a>
  </p>
 </td>
 <td>
  
  
 </td>
</tr>
<tr>
 <td class="content">





<div>

<form method="POST" name="itemSynopsis"
      onsubmit="return submit_once()"
      enctype="multipart/form-data" action="issue91">

<table class="form">
<tr>
 <th class="required">Title</th>
 <td colspan="3">OpenSolaris bug import code should only download the bug if our copy is more than a day old</td>
</tr>

<tr>
 <th>Milestone</th>
 <td></td>
 <th class="required">Priority</th>
 <td>wish</td>
</tr>

<tr>
 <th>Waiting On</th>
 <td>
  
  
  
 </td>
 <th>Status</th>
 <td>resolved</td>
</tr>

<tr>
 <th>Superseder</th>
 <td>
  
  
  
 </td>
 <th>Nosy List</th>
 <td>
  paulproteus, pythonian4000
  <br>
 </td>
</tr>

<tr>
 <th>Assigned To</th>
 <td></td>
 <th>Keywords</th>
 <td>
  bitesize
  
 </td>
</tr>







</table>
</form>



<p>Created on <b>2010-06-01.20:12:41</b> by <b>paulproteus</b>, last changed <b>2010-06-16.00:59:09</b> by <b>paulproteus</b>.</p>

<table class="files">
 <tr><th colspan="5" class="header">Files</th></tr>
 <tr>
  <th>File name</th>
  <th>Uploaded</th>
  <th>Type</th>
  <th>Edit</th>
  <th>Remove</th>
 </tr>
 <tr>
  <td>
   <a href="file26/issue91.patch">issue91.patch</a>
  </td>
  <td>
   <span>pythonian4000</span>,
   <span>2010-06-14.21:38:49</span>
  </td>
  <td>application/octet-stream</td>
  <td>
  </td>
  <td>
   
  </td>
 </tr>
</table>

<table class="messages">
 <tr><th colspan="4" class="header">Messages</th></tr>
 
  <tr>
   <th><a href="msg251">msg251 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2010-06-16.00:59:04</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>One more problem -- you indented the update() function too far in. I de-dented it.

Because it was indented too far, the call to update() in
search/management/commands/search_daily_tasks.py could not find update().

Fixed, and pushed. Thanks for your contribution!</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg250">msg250 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2010-06-16.00:51:49</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>This is awesome. I've just pushed it onto origin/master.

You should now:

$ git fetch
$ git rebase origin/master

and you'll see that git squashes away your commit (since it's already on
origin/master).

I did have to run "M-x untabify" -- in the future, please try to submit patches
that only use spaces to indent, not tabs. (It's okay -- I fixed it this time!)

You rule. Thank you. (Please add the OpenHatch project to your profile!) (-:</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg246">msg246 (view)</a></th>
   <th>Author: pythonian4000</th>
   <th>Date: 2010-06-14.21:38:49</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>All done, here is the patch with everything this time!</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg245">msg245 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2010-06-14.15:06:55</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Wow, this patch is amazing. Thanks for writing a test!

The test fails for me -- I lack the sample data file. I guess you should do the
following:

1. Use "git add" and "git commit" to make this into a commit, locally on your
machine

2. Use "git format-patch" to re-attach a new patch

3. When I review your git format-patch file, and I commit and push that into
origin/master, I can show you how to use "git rebase" to have git figure out
what to do.

P.S. Major thanks for tackling this!</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg244">msg244 (view)</a></th>
   <th>Author: pythonian4000</th>
   <th>Date: 2010-06-14.13:34:13</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Thanks for the assistance paulproteus! Patch file follows.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg243">msg243 (view)</a></th>
   <th>Author: pythonian4000</th>
   <th>Date: 2010-06-14.13:26:08</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>I have tests and a fix for this sitting in my workspace, with little idea how to
get them out! Seems I can't create a patch without committing, and I don't
really want to commit for fear of messing with the master copy (am new to Git),
so I will ask on IRC first ^_^</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg230">msg230 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2010-06-01.20:12:40</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>We have a special bug importer for OpenSolaris OS/Net bugs that are considered
"bitesized". The way bug importing works is that we read some information from
the remote bug tracker, and we save it in the OpenHatch database in an object
whose type is "Bug".

If you read our other bug tracker importing code, you'll see we do an "if" test:
if the OpenHatch Bug object's last_polled field is between right now and one day
in the past, we don't bother downloading the bug again from the

But for OpenSolaris OS/Net, that check isn't part of the code. So if we run the
nightly bug import script more often than once every 24 hours, we'll download
bugs from OpenSolaris's bug tracker too often. We want to be a good citizen and
not hammer them, so this is a bug!

A good fix for this would use mock.patch() to mock out calls to the network, and
carefully construct one bug that we *should* update, and one bug we should *not*
update.

We would also accept a fix that had no test for this, though!</pre>
   </td>
  </tr>
 
</table>

<table class="history"><tr><th colspan="4" class="header">
History
</th></tr><tr>
<th>Date</th>
<th>User</th>
<th>Action</th>
<th>Args</th>
</tr>
<tr><td>2010-06-16&nbsp;00:59:09</td><td>paulproteus</td><td>set</td><td>status: chatting -> resolved</td></tr>
<tr><td>2010-06-16&nbsp;00:59:04</td><td>paulproteus</td><td>set</td><td>status: resolved -> chatting<br />messages:
  + <a href="msg251">msg251</a></td></tr>
<tr><td>2010-06-16&nbsp;00:51:49</td><td>paulproteus</td><td>set</td><td>status: chatting -> resolved<br />messages:
  + <a href="msg250">msg250</a></td></tr>
<tr><td>2010-06-14&nbsp;21:38:49</td><td>pythonian4000</td><td>set</td><td>files:
  + <a href="file26">issue91.patch</a><br />messages:
  + <a href="msg246">msg246</a></td></tr>
<tr><td>2010-06-14&nbsp;21:37:43</td><td>pythonian4000</td><td>set</td><td>files:
  - <a href="file25">issue91.patch</a></td></tr>
<tr><td>2010-06-14&nbsp;15:06:55</td><td>paulproteus</td><td>set</td><td>status: unread -> chatting<br />messages:
  + <a href="msg245">msg245</a></td></tr>
<tr><td>2010-06-14&nbsp;13:34:13</td><td>pythonian4000</td><td>set</td><td>status: in-progress -> unread<br />assignedto: <a href="user34">pythonian4000</a> -> <a href="userNone"></a><br />messages:
  + <a href="msg244">msg244</a><br />files:
  + <a href="file25">issue91.patch</a></td></tr>
<tr><td>2010-06-14&nbsp;13:26:08</td><td>pythonian4000</td><td>set</td><td>status: chatting -> in-progress<br />assignedto: <a href="user34">pythonian4000</a><br />messages:
  + <a href="msg243">msg243</a><br />nosy:
  + <a href="user34">pythonian4000</a></td></tr>
<tr><td>2010-06-03&nbsp;17:02:02</td><td>paulproteus</td><td>set</td><td>priority: bug -> wish<br />title: OpenSolaris bug import code always downloads the bug, even if we have a fresh copy in the database -> OpenSolaris bug import code should only download the bug if our copy is more than a day old</td></tr>
<tr><td>2010-06-01&nbsp;20:12:41</td><td>paulproteus</td><td>create</td><td></td></tr>
</table>

</div>

</td>
</tr>

</table>



</body>
</html>

<!-- SHA: cef943195fefd743431d22c020eef27edd6255e1 -->
