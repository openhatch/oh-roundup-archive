<!-- dollarId: issue.item,v 1.4 2001/08/03 01:19:43 richard Exp dollar-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>
Issue 66: i18n, mojibake: multibyte characters incorrectly handled in user profile & most settings - Roundup issue tracker

</title>
<link rel="stylesheet" type="text/css" href="@@file/style.css">
<meta http-equiv="Content-Type"
      content="text/html; charset=utf-8" />

<script type="text/javascript">
submitted = false;
function submit_once() {
    if (submitted) {
        alert("Your request is being processed.\nPlease be patient.");
        event.returnValue = 0;    // work-around for IE
        return 0;
    }
    submitted = true;
    return 1;
}

function help_window(helpurl, width, height) {
    HelpWin = window.open('https://openhatch.org/bugs/' + helpurl, 'RoundupHelpWindow', 'scrollbars=yes,resizable=yes,toolbar=no,height='+height+',width='+width);
}
</script>



</head>
<body class="body">

<table class="body">

<tr>
 <td class="page-header-left"><a href="/" title="OpenHatch"><img src="/static/images/the-logo-bluegreen-87px.png" width="87" height="60" alt="openhatch" /></a></td>
 <td class="page-header-top">
   <div id="body-title">
     <h2>
 
 
 Issue66
 
</h2>
   </div>
   <div id="searchbox">
     <form method="GET" action="issue">
       <input type="hidden" name="@columns"
              value="id,activity,title,creator,assignedto,status,milestone" />
       <input type="hidden" name="@sort" value="activity" />
       <input type="hidden" name="@group" value="priority" />
       <input id="search-text" name="@search_text" size="10" />
       <input type="submit" id="submit" name="submit"
              value="Search" />
     </form>
  </div>
 </td>
</tr>

<tr>
 <td rowspan="2" valign="top" class="sidebar">
  

  <p class="classblock">
    <b>This month: 0.13.10</b><br>
    <a href="/wiki/0.13.10">Goals (in wiki)</a><br>
    <a href="milestone19?@template=open">Bug list</a>
  </p>

  <form method="POST" action="https://openhatch.org/bugs/">
   <p class="classblock">
    <b>Issues</b><br>
    
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@columns=id,activity,title,creator,status,milestone&amp;assignedto=-1&amp;@group=priority&amp;@dispname=Show Unassigned&amp;@filter=status,assignedto&amp;@pagesize=50&amp;@startwith=0">Show Unassigned</a><br>
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@dispname=Show All&amp;@filter=status&amp;@group=priority&amp;@columns=id,activity,title,creator,assignedto,status,milestone&amp;@pagesize=50&amp;@startwith=0">Show All</a><br>
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@columns=id,activity,title,creator,assignedto,status,milestone&amp;@dispname=Show Bitesized&amp;keyword=1&amp;@group=priority&amp;@filter=status,keyword&amp;@pagesize=50&amp;@startwith=0">Show Bitesized</a><br>
    <a href="issue?@template=search">Search</a><br>
    <input type="submit" class="form-small"
           value="Show issue:"><input class="form-small" size="4" type="text" name="@number">
    <input type="hidden" name="@type" value="issue">
    <input type="hidden" name="@action" value="show">
   </p>
  </form>

  

  

  

   <p class="userblock">
    <b>Login</b><br>
    <a href="https://openhatch.org/account/login/?next=/bugs/issue66">Click here to login.</a>
   </p>

  
  <p class="userblock">
   <b>Help</b><br>
   <a href="http://www.roundup-tracker.org/docs.html">Bug tracker docs</a>
  </p>
 </td>
 <td>
  
  
 </td>
</tr>
<tr>
 <td class="content">





<div>

<form method="POST" name="itemSynopsis"
      onsubmit="return submit_once()"
      enctype="multipart/form-data" action="issue66">

<table class="form">
<tr>
 <th class="required">Title</th>
 <td colspan="3">i18n, mojibake: multibyte characters incorrectly handled in user profile &amp; most settings</td>
</tr>

<tr>
 <th>Milestone</th>
 <td></td>
 <th class="required">Priority</th>
 <td>bug</td>
</tr>

<tr>
 <th>Waiting On</th>
 <td>
  
  
  
 </td>
 <th>Status</th>
 <td>resolved</td>
</tr>

<tr>
 <th>Superseder</th>
 <td>
  
  
  
 </td>
 <th>Nosy List</th>
 <td>
  paulproteus, rafpaf, shadowspar
  <br>
 </td>
</tr>

<tr>
 <th>Assigned To</th>
 <td></td>
 <th>Keywords</th>
 <td>
  
  
 </td>
</tr>







</table>
</form>



<p>Created on <b>2010-04-09.19:54:57</b> by <b>shadowspar</b>, last changed <b>2010-04-12.21:05:45</b> by <b>paulproteus</b>.</p>



<table class="messages">
 <tr><th colspan="4" class="header">Messages</th></tr>
 
  <tr>
   <th><a href="msg149">msg149 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2010-04-12.21:05:45</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Mojibake should all be fixed. utf8 wins the day.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg147">msg147 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2010-04-09.20:16:22</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>I checked this out. If I run a CREATE TABLE, MySQL sets the default character
set of that table to latin-1. So I ran this, and it fixed it:

mysql&gt; alter database oh_milestone_a charset=utf8;

But that doesn't actually make any *existing* tables set their default character
sets to utf8. That can be done with:

mysql&gt; alter table profile_tag charset=utf8;

But that doesn't fix any column that already exists. *That* can be done by:

mysql&gt; alter table profile_tag modify text varchar(255) character set utf8;

And doing the above fixed profile tags.

This fashion of going forward is probably safe and correct. Unless it's not and
we're going to corrupt some people's non-ASCII data. I wonder. But we can always
just try it, and then we'll have UTF-8-style mojibake instead of Latin-1-style
mojibake or ????s around.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg146">msg146 (view)</a></th>
   <th>Author: shadowspar</th>
   <th>Date: 2010-04-09.19:54:56</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Summary:

In all of the fields listed on the Profile edit page, multibyte characters get
turned into question marks on save.

Reproduction:

1. Navigate to <a href="https://openhatch.org/profile/views/edit_info.">https://openhatch.org/profile/views/edit_info.</a>
2. Add some multibyte characters to any or all of the fields (eg カナダ人).
3. Click the "Save" button.
4. Notice that the multibyte characters have been turned into question marks (????).

ISO-8859-1 characters (eg, the accented chars in "dévêløpmènt") seem to work
correctly.

Desired outcome: 

Multibyte characters are correctly handled.  On save, users get back the same
text they entered, regardless of language or character set.</pre>
   </td>
  </tr>
 
</table>

<table class="history"><tr><th colspan="4" class="header">
History
</th></tr><tr>
<th>Date</th>
<th>User</th>
<th>Action</th>
<th>Args</th>
</tr>
<tr><td>2010-04-12&nbsp;21:05:45</td><td>paulproteus</td><td>set</td><td>status: chatting -> resolved<br />messages:
  + <a href="msg149">msg149</a></td></tr>
<tr><td>2010-04-09&nbsp;20:16:23</td><td>paulproteus</td><td>set</td><td>status: unread -> chatting<br />nosy:
  + <a href="user3">paulproteus</a>, <a href="user5">rafpaf</a><br />messages:
  + <a href="msg147">msg147</a></td></tr>
<tr><td>2010-04-09&nbsp;19:54:57</td><td>shadowspar</td><td>create</td><td></td></tr>
</table>

</div>

</td>
</tr>

</table>



</body>
</html>

<!-- SHA: cef943195fefd743431d22c020eef27edd6255e1 -->
