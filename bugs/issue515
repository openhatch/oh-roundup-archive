<!-- dollarId: issue.item,v 1.4 2001/08/03 01:19:43 richard Exp dollar-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>
Issue 515: Can't *not* have 'receive maintainer updates' checked for all projects - Roundup issue tracker

</title>
<link rel="stylesheet" type="text/css" href="@@file/style.css">
<meta http-equiv="Content-Type"
      content="text/html; charset=utf-8" />

<script type="text/javascript">
submitted = false;
function submit_once() {
    if (submitted) {
        alert("Your request is being processed.\nPlease be patient.");
        event.returnValue = 0;    // work-around for IE
        return 0;
    }
    submitted = true;
    return 1;
}

function help_window(helpurl, width, height) {
    HelpWin = window.open('https://openhatch.org/bugs/' + helpurl, 'RoundupHelpWindow', 'scrollbars=yes,resizable=yes,toolbar=no,height='+height+',width='+width);
}
</script>



</head>
<body class="body">

<table class="body">

<tr>
 <td class="page-header-left"><a href="/" title="OpenHatch"><img src="/static/images/the-logo-bluegreen-87px.png" width="87" height="60" alt="openhatch" /></a></td>
 <td class="page-header-top">
   <div id="body-title">
     <h2>
 
 
 Issue515
 
</h2>
   </div>
   <div id="searchbox">
     <form method="GET" action="issue">
       <input type="hidden" name="@columns"
              value="id,activity,title,creator,assignedto,status,milestone" />
       <input type="hidden" name="@sort" value="activity" />
       <input type="hidden" name="@group" value="priority" />
       <input id="search-text" name="@search_text" size="10" />
       <input type="submit" id="submit" name="submit"
              value="Search" />
     </form>
  </div>
 </td>
</tr>

<tr>
 <td rowspan="2" valign="top" class="sidebar">
  

  <p class="classblock">
    <b>This month: 0.13.10</b><br>
    <a href="/wiki/0.13.10">Goals (in wiki)</a><br>
    <a href="milestone19?@template=open">Bug list</a>
  </p>

  <form method="POST" action="https://openhatch.org/bugs/">
   <p class="classblock">
    <b>Issues</b><br>
    
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@columns=id,activity,title,creator,status,milestone&amp;assignedto=-1&amp;@group=priority&amp;@dispname=Show Unassigned&amp;@filter=status,assignedto&amp;@pagesize=50&amp;@startwith=0">Show Unassigned</a><br>
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@dispname=Show All&amp;@filter=status&amp;@group=priority&amp;@columns=id,activity,title,creator,assignedto,status,milestone&amp;@pagesize=50&amp;@startwith=0">Show All</a><br>
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@columns=id,activity,title,creator,assignedto,status,milestone&amp;@dispname=Show Bitesized&amp;keyword=1&amp;@group=priority&amp;@filter=status,keyword&amp;@pagesize=50&amp;@startwith=0">Show Bitesized</a><br>
    <a href="issue?@template=search">Search</a><br>
    <input type="submit" class="form-small"
           value="Show issue:"><input class="form-small" size="4" type="text" name="@number">
    <input type="hidden" name="@type" value="issue">
    <input type="hidden" name="@action" value="show">
   </p>
  </form>

  

  

  

   <p class="userblock">
    <b>Login</b><br>
    <a href="https://openhatch.org/account/login/?next=/bugs/issue515">Click here to login.</a>
   </p>

  
  <p class="userblock">
   <b>Help</b><br>
   <a href="http://www.roundup-tracker.org/docs.html">Bug tracker docs</a>
  </p>
 </td>
 <td>
  
  
 </td>
</tr>
<tr>
 <td class="content">





<div>

<form method="POST" name="itemSynopsis"
      onsubmit="return submit_once()"
      enctype="multipart/form-data" action="issue515">

<table class="form">
<tr>
 <th class="required">Title</th>
 <td colspan="3">Can't *not* have 'receive maintainer updates' checked for all projects</td>
</tr>

<tr>
 <th>Milestone</th>
 <td>0.11.07</td>
 <th class="required">Priority</th>
 <td>urgent</td>
</tr>

<tr>
 <th>Waiting On</th>
 <td>
  
  
  
 </td>
 <th>Status</th>
 <td>resolved</td>
</tr>

<tr>
 <th>Superseder</th>
 <td>
  
  
  
 </td>
 <th>Nosy List</th>
 <td>
  aldeka, jesstess, paulproteus
  <br>
 </td>
</tr>

<tr>
 <th>Assigned To</th>
 <td>paulproteus</td>
 <th>Keywords</th>
 <td>
  javascript, this-would-rock, usability
  
 </td>
</tr>







</table>
</form>



<p>Created on <b>2011-08-07.06:14:28</b> by <b>aldeka</b>, last changed <b>2011-09-01.04:48:16</b> by <b>paulproteus</b>.</p>



<table class="messages">
 <tr><th colspan="4" class="header">Messages</th></tr>
 
  <tr>
   <th><a href="msg2448">msg2448 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2011-09-01.04:48:16</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>This is pushed and deployed. Thanks all that helped find it.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2430">msg2430 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2011-08-31.18:13:48</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Karen, your instructions for how to reproduce the bug were hugely helpful.

The root cause of the problem was that the JavaScript would, in the background,
1.5 seconds after the project gets saved, refresh all the data on the page from
the server. This could easily cause checkboxes to get overwritten.

The original point of that code was to repeatedly check with the server to see
if it its search for the icon for the project had finished. I've written the
JavaScript code that handles that so that it's more precise about only updating
the one project for which it is called. 

I have this fix on my desktop; will push it in a couple of hours.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2399">msg2399 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2011-08-27.21:37:48</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Marking this as 0.11.07 because this is pretty urgent.

I don't know if it'll make it, since there are only four days left, but it would 
be great.

I will try to tackle it if it gets to August 30 or 31 and it's not done.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2389">msg2389 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2011-08-27.20:20:07</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Ah hah. Yeah, this isn't just a usability problem, it's a data-loss bug. That is 
bad news. Increasing priority to 'urgent'.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2285">msg2285 (view)</a></th>
   <th>Author: jesstess</th>
   <th>Date: 2011-08-07.20:06:01</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>That I can reproduce. The culprit is described in the comments for the updatePortfolio function in 
mysite/static/js/importer.js:

"""
* Side-effect: Update the page's DOM to display these data.
* (FIXME: Right now we just add, not "update" :-)
"""

updatePortfolio gets called when you save a portfolio entry, and it clobbers the DOM changes you 
made checking and unchecking those maintainer checkboxes.

I'm removing the bitsized tag since refactoring this is non-trivial.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2284">msg2284 (view)</a></th>
   <th>Author: aldeka</th>
   <th>Date: 2011-08-07.18:46:45</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Weird--it isn't happening quite the same way now. (This is on Chromium on Ubuntu.) 
Now I can uncheck a box, and save it. When I uncheck multiple boxes, then hit save 
on only one project, the other projects' maintainer updates boxes revert to 
checked. Which project you start with doesn't appear to matter.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2281">msg2281 (view)</a></th>
   <th>Author: jesstess</th>
   <th>Date: 2011-08-07.18:18:56</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>I'm not able to reproduce this in Chrome, Firefox, or Safari. What browser are you using, and does this 
happen with every project listed in your portfolio?</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2261">msg2261 (view)</a></th>
   <th>Author: aldeka</th>
   <th>Date: 2011-08-07.06:14:27</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>When I go to <a href="http://openhatch.org/+portfolio/editor/,">http://openhatch.org/+portfolio/editor/,</a> the 'receive maintainer 
updates' checkbox is checked for all of the projects I have listed there. If I 
uncheck the box, it re-checks itself a second later, before I can hit save. It 
does this over and over again! SO FRUSTRATING AAAAAAUGH

It does this whether or not you are currently in the process of importing stuff 
automatically.

Looks like I'm getting maintainer updates, whether I want to or not. :P

I assume there's some bug in the JavaScript that is doing this. If there's a 
person out there who's willing to dig through our JS code and fix this, that 
would be totally awesome!</pre>
   </td>
  </tr>
 
</table>

<table class="history"><tr><th colspan="4" class="header">
History
</th></tr><tr>
<th>Date</th>
<th>User</th>
<th>Action</th>
<th>Args</th>
</tr>
<tr><td>2011-09-01&nbsp;04:48:16</td><td>paulproteus</td><td>set</td><td>status: in-progress -> resolved<br />messages:
  + <a href="msg2448">msg2448</a></td></tr>
<tr><td>2011-08-31&nbsp;18:13:49</td><td>paulproteus</td><td>set</td><td>status: chatting -> in-progress<br />assignedto: <a href="user3">paulproteus</a><br />messages:
  + <a href="msg2430">msg2430</a></td></tr>
<tr><td>2011-08-27&nbsp;21:37:48</td><td>paulproteus</td><td>set</td><td>messages:
  + <a href="msg2399">msg2399</a><br />milestone: <a href="milestone12">0.11.10</a> -> <a href="milestone10">0.11.07</a></td></tr>
<tr><td>2011-08-27&nbsp;20:20:08</td><td>paulproteus</td><td>set</td><td>priority: bug -> urgent<br />messages:
  + <a href="msg2389">msg2389</a></td></tr>
<tr><td>2011-08-07&nbsp;20:06:01</td><td>jesstess</td><td>set</td><td>messages:
  + <a href="msg2285">msg2285</a><br />keyword:
  - <a href="keyword1">bitesize</a></td></tr>
<tr><td>2011-08-07&nbsp;18:46:45</td><td>aldeka</td><td>set</td><td>priority: urgent -> bug<br />messages:
  + <a href="msg2284">msg2284</a></td></tr>
<tr><td>2011-08-07&nbsp;18:18:56</td><td>jesstess</td><td>set</td><td>status: unread -> chatting<br />nosy:
  + <a href="user12">jesstess</a><br />messages:
  + <a href="msg2281">msg2281</a></td></tr>
<tr><td>2011-08-07&nbsp;06:14:28</td><td>aldeka</td><td>create</td><td></td></tr>
</table>

</div>

</td>
</tr>

</table>



</body>
</html>

<!-- SHA: cef943195fefd743431d22c020eef27edd6255e1 -->
