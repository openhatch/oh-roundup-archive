<!-- dollarId: issue.item,v 1.4 2001/08/03 01:19:43 richard Exp dollar-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>
Issue 875: Uncaught SyntaxError: Unexpected token > - Roundup issue tracker

</title>
<link rel="stylesheet" type="text/css" href="@@file/style.css">
<meta http-equiv="Content-Type"
      content="text/html; charset=utf-8" />

<script type="text/javascript">
submitted = false;
function submit_once() {
    if (submitted) {
        alert("Your request is being processed.\nPlease be patient.");
        event.returnValue = 0;    // work-around for IE
        return 0;
    }
    submitted = true;
    return 1;
}

function help_window(helpurl, width, height) {
    HelpWin = window.open('https://openhatch.org/bugs/' + helpurl, 'RoundupHelpWindow', 'scrollbars=yes,resizable=yes,toolbar=no,height='+height+',width='+width);
}
</script>



</head>
<body class="body">

<table class="body">

<tr>
 <td class="page-header-left"><a href="/" title="OpenHatch"><img src="/static/images/the-logo-bluegreen-87px.png" width="87" height="60" alt="openhatch" /></a></td>
 <td class="page-header-top">
   <div id="body-title">
     <h2>
 
 
 Issue875
 
</h2>
   </div>
   <div id="searchbox">
     <form method="GET" action="issue">
       <input type="hidden" name="@columns"
              value="id,activity,title,creator,assignedto,status,milestone" />
       <input type="hidden" name="@sort" value="activity" />
       <input type="hidden" name="@group" value="priority" />
       <input id="search-text" name="@search_text" size="10" />
       <input type="submit" id="submit" name="submit"
              value="Search" />
     </form>
  </div>
 </td>
</tr>

<tr>
 <td rowspan="2" valign="top" class="sidebar">
  

  <p class="classblock">
    <b>This month: 0.13.10</b><br>
    <a href="/wiki/0.13.10">Goals (in wiki)</a><br>
    <a href="milestone19?@template=open">Bug list</a>
  </p>

  <form method="POST" action="https://openhatch.org/bugs/">
   <p class="classblock">
    <b>Issues</b><br>
    
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@columns=id,activity,title,creator,status,milestone&amp;assignedto=-1&amp;@group=priority&amp;@dispname=Show Unassigned&amp;@filter=status,assignedto&amp;@pagesize=50&amp;@startwith=0">Show Unassigned</a><br>
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@dispname=Show All&amp;@filter=status&amp;@group=priority&amp;@columns=id,activity,title,creator,assignedto,status,milestone&amp;@pagesize=50&amp;@startwith=0">Show All</a><br>
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@columns=id,activity,title,creator,assignedto,status,milestone&amp;@dispname=Show Bitesized&amp;keyword=1&amp;@group=priority&amp;@filter=status,keyword&amp;@pagesize=50&amp;@startwith=0">Show Bitesized</a><br>
    <a href="issue?@template=search">Search</a><br>
    <input type="submit" class="form-small"
           value="Show issue:"><input class="form-small" size="4" type="text" name="@number">
    <input type="hidden" name="@type" value="issue">
    <input type="hidden" name="@action" value="show">
   </p>
  </form>

  

  

  

   <p class="userblock">
    <b>Login</b><br>
    <a href="https://openhatch.org/account/login/?next=/bugs/issue875">Click here to login.</a>
   </p>

  
  <p class="userblock">
   <b>Help</b><br>
   <a href="http://www.roundup-tracker.org/docs.html">Bug tracker docs</a>
  </p>
 </td>
 <td>
  
  
 </td>
</tr>
<tr>
 <td class="content">





<div>

<form method="POST" name="itemSynopsis"
      onsubmit="return submit_once()"
      enctype="multipart/form-data" action="issue875">

<table class="form">
<tr>
 <th class="required">Title</th>
 <td colspan="3">Uncaught SyntaxError: Unexpected token &gt;</td>
</tr>

<tr>
 <th>Milestone</th>
 <td></td>
 <th class="required">Priority</th>
 <td>critical</td>
</tr>

<tr>
 <th>Waiting On</th>
 <td>
  
  
  
 </td>
 <th>Status</th>
 <td>resolved</td>
</tr>

<tr>
 <th>Superseder</th>
 <td>
  
  
  
 </td>
 <th>Nosy List</th>
 <td>
  brittag, konarkmodi, morgajel, paulproteus
  <br>
 </td>
</tr>

<tr>
 <th>Assigned To</th>
 <td>konarkmodi</td>
 <th>Keywords</th>
 <td>
  
  
 </td>
</tr>







</table>
</form>



<p>Created on <b>2013-08-22.12:22:16</b> by <b>morgajel</b>, last changed <b>2013-12-19.21:25:50</b> by <b>mandarg</b>.</p>



<table class="messages">
 <tr><th colspan="4" class="header">Messages</th></tr>
 
  <tr>
   <th><a href="msg4005">msg4005 (view)</a></th>
   <th>Author: mandarg</th>
   <th>Date: 2013-12-19.21:25:50</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>This PR seems to resolve the reported bug, so marking it as such. Feel free to reopen if a more elegant 
solution is desired, etc.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg3958">msg3958 (view)</a></th>
   <th>Author: mandarg</th>
   <th>Date: 2013-11-22.18:32:27</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Submitted pull request <a href="https://github.com/openhatch/oh-mainline/pull/167">https://github.com/openhatch/oh-mainline/pull/167</a> for this, which should 
at least partially solve this issue.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg3845">msg3845 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2013-09-11.21:53:37</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>The answer is probably as simple as replacing something like:

&lt;a href="{{ variable }}"&gt;

with

&lt;a href="{{ variable | filter_for_html_attribute_safety }}"&gt;

I just don't know the name of the filter for HTML attribute safety.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg3844">msg3844 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2013-09-11.21:51:58</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Awesome!

I think the core thing here is that in the template that generates the projects 
page, we're putting data into HTML attributes that is not properly escaped.

Helpful reading:

* <a href="http://security.stackexchange.com/questions/27805/is-djangos-built-in-">http://security.stackexchange.com/questions/27805/is-djangos-built-in-</a>
security-enough

* <a href="https://docs.djangoproject.com/en/dev/topics/security/">https://docs.djangoproject.com/en/dev/topics/security/</a> (section on XSS)

This is an XSS-type attack, and it only partly succeeds.

I don't know the standard Django way to escape a value in a way safe for HTML 
attributes. I'm surprised the Django security docs don't contain a 
recommendation about that.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg3843">msg3843 (view)</a></th>
   <th>Author: konarkmodi</th>
   <th>Date: 2013-09-11.08:42:13</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>I'll take a look at it and work on it !!!</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg3819">msg3819 (view)</a></th>
   <th>Author: brittag</th>
   <th>Date: 2013-08-22.20:18:30</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>The last item that displays on the page is this very interesting one: 
<a href="http://openhatch.org/projects/%22%22%3E%3Cscript%3Ealert%28%223%22%29%3C/script%3E">http://openhatch.org/projects/%22%22%3E%3Cscript%3Ealert%28%223%22%29%3C/script%3E</a></pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg3817">msg3817 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2013-08-22.13:57:19</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>This is almost definitely an escaping error in an HTML attribute, where 
we're generating a link by embedding a Django variable (probably 
project.name) without also doing HTML attribute escaping on it.

The quick fix is to find that accidental wrong escaping. The better fix 
might be to think about what we want users to get out of that page, and to 
remove it if the list is empty.

Still, someone fixing this would be a huge help! It's probably even 
bitesized.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg3816">msg3816 (view)</a></th>
   <th>Author: morgajel</th>
   <th>Date: 2013-08-22.12:22:16</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre><a href="http://openhatch.org/projects/">http://openhatch.org/projects/</a>

Page is truncated and says "Uncaught SyntaxError: Unexpected token &gt; " in the 
console log.</pre>
   </td>
  </tr>
 
</table>

<table class="history"><tr><th colspan="4" class="header">
History
</th></tr><tr>
<th>Date</th>
<th>User</th>
<th>Action</th>
<th>Args</th>
</tr>
<tr><td>2013-12-19&nbsp;21:25:50</td><td>mandarg</td><td>set</td><td>status: need-review -> resolved<br />messages:
  + <a href="msg4005">msg4005</a></td></tr>
<tr><td>2013-11-22&nbsp;18:32:28</td><td>mandarg</td><td>set</td><td>status: chatting -> need-review<br />messages:
  + <a href="msg3958">msg3958</a></td></tr>
<tr><td>2013-09-11&nbsp;21:53:37</td><td>paulproteus</td><td>set</td><td>messages:
  + <a href="msg3845">msg3845</a></td></tr>
<tr><td>2013-09-11&nbsp;21:51:59</td><td>paulproteus</td><td>set</td><td>messages:
  + <a href="msg3844">msg3844</a></td></tr>
<tr><td>2013-09-11&nbsp;08:42:13</td><td>konarkmodi</td><td>set</td><td>assignedto: <a href="user651">konarkmodi</a><br />messages:
  + <a href="msg3843">msg3843</a><br />nosy:
  + <a href="user651">konarkmodi</a></td></tr>
<tr><td>2013-08-22&nbsp;20:18:30</td><td>brittag</td><td>set</td><td>nosy:
  + <a href="user811">brittag</a><br />messages:
  + <a href="msg3819">msg3819</a></td></tr>
<tr><td>2013-08-22&nbsp;13:57:19</td><td>paulproteus</td><td>set</td><td>status: unread -> chatting<br />messages:
  + <a href="msg3817">msg3817</a></td></tr>
<tr><td>2013-08-22&nbsp;12:22:16</td><td>morgajel</td><td>create</td><td></td></tr>
</table>

</div>

</td>
</tr>

</table>



</body>
</html>

<!-- SHA: cef943195fefd743431d22c020eef27edd6255e1 -->
