<!-- dollarId: issue.item,v 1.4 2001/08/03 01:19:43 richard Exp dollar-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>
Issue 474: Visiting a bad /bugs URL says an error has occurred - Roundup issue tracker

</title>
<link rel="stylesheet" type="text/css" href="@@file/style.css">
<meta http-equiv="Content-Type"
      content="text/html; charset=utf-8" />

<script type="text/javascript">
submitted = false;
function submit_once() {
    if (submitted) {
        alert("Your request is being processed.\nPlease be patient.");
        event.returnValue = 0;    // work-around for IE
        return 0;
    }
    submitted = true;
    return 1;
}

function help_window(helpurl, width, height) {
    HelpWin = window.open('https://openhatch.org/bugs/' + helpurl, 'RoundupHelpWindow', 'scrollbars=yes,resizable=yes,toolbar=no,height='+height+',width='+width);
}
</script>



</head>
<body class="body">

<table class="body">

<tr>
 <td class="page-header-left"><a href="/" title="OpenHatch"><img src="/static/images/the-logo-bluegreen-87px.png" width="87" height="60" alt="openhatch" /></a></td>
 <td class="page-header-top">
   <div id="body-title">
     <h2>
 
 
 Issue474
 
</h2>
   </div>
   <div id="searchbox">
     <form method="GET" action="issue">
       <input type="hidden" name="@columns"
              value="id,activity,title,creator,assignedto,status,milestone" />
       <input type="hidden" name="@sort" value="activity" />
       <input type="hidden" name="@group" value="priority" />
       <input id="search-text" name="@search_text" size="10" />
       <input type="submit" id="submit" name="submit"
              value="Search" />
     </form>
  </div>
 </td>
</tr>

<tr>
 <td rowspan="2" valign="top" class="sidebar">
  

  <p class="classblock">
    <b>This month: 0.13.10</b><br>
    <a href="/wiki/0.13.10">Goals (in wiki)</a><br>
    <a href="milestone19?@template=open">Bug list</a>
  </p>

  <form method="POST" action="https://openhatch.org/bugs/">
   <p class="classblock">
    <b>Issues</b><br>
    
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@columns=id,activity,title,creator,status,milestone&amp;assignedto=-1&amp;@group=priority&amp;@dispname=Show Unassigned&amp;@filter=status,assignedto&amp;@pagesize=50&amp;@startwith=0">Show Unassigned</a><br>
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@dispname=Show All&amp;@filter=status&amp;@group=priority&amp;@columns=id,activity,title,creator,assignedto,status,milestone&amp;@pagesize=50&amp;@startwith=0">Show All</a><br>
    <a href="issue?status=-1,1,2,3,4,5,6,7,9,10&amp;@sort=-activity&amp;@search_text=&amp;@columns=id,activity,title,creator,assignedto,status,milestone&amp;@dispname=Show Bitesized&amp;keyword=1&amp;@group=priority&amp;@filter=status,keyword&amp;@pagesize=50&amp;@startwith=0">Show Bitesized</a><br>
    <a href="issue?@template=search">Search</a><br>
    <input type="submit" class="form-small"
           value="Show issue:"><input class="form-small" size="4" type="text" name="@number">
    <input type="hidden" name="@type" value="issue">
    <input type="hidden" name="@action" value="show">
   </p>
  </form>

  

  

  

   <p class="userblock">
    <b>Login</b><br>
    <a href="https://openhatch.org/account/login/?next=/bugs/issue474">Click here to login.</a>
   </p>

  
  <p class="userblock">
   <b>Help</b><br>
   <a href="http://www.roundup-tracker.org/docs.html">Bug tracker docs</a>
  </p>
 </td>
 <td>
  
  
 </td>
</tr>
<tr>
 <td class="content">





<div>

<form method="POST" name="itemSynopsis"
      onsubmit="return submit_once()"
      enctype="multipart/form-data" action="issue474">

<table class="form">
<tr>
 <th class="required">Title</th>
 <td colspan="3">Visiting a bad /bugs URL says an error has occurred</td>
</tr>

<tr>
 <th>Milestone</th>
 <td>later</td>
 <th class="required">Priority</th>
 <td>bug</td>
</tr>

<tr>
 <th>Waiting On</th>
 <td>
  
  
  
 </td>
 <th>Status</th>
 <td>chatting</td>
</tr>

<tr>
 <th>Superseder</th>
 <td>
  
  
  
 </td>
 <th>Nosy List</th>
 <td>
  egor83, jesstess, paulproteus, pythonian4000
  <br>
 </td>
</tr>

<tr>
 <th>Assigned To</th>
 <td></td>
 <th>Keywords</th>
 <td>
  
  
 </td>
</tr>







</table>
</form>



<p>Created on <b>2011-07-12.20:03:49</b> by <b>jesstess</b>, last changed <b>2013-03-19.04:13:56</b> by <b>Coffeeman</b>.</p>



<table class="messages">
 <tr><th colspan="4" class="header">Messages</th></tr>
 
  <tr>
   <th><a href="msg3619">msg3619 (view)</a></th>
   <th>Author: Coffeeman</th>
   <th>Date: 2013-03-19.04:13:56</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Related to 827?</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2446">msg2446 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2011-09-01.04:44:15</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>Here is the exception that Roundup raises:

EXCEPTION AT Thu Sep  1 04:40:30 2011
Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.6/roundup/scripts/roundup_server.py", line
192, in run_cgi
    self.inner_run_cgi()
  File "/usr/lib/pymodules/python2.6/roundup/scripts/roundup_server.py", line
368, in inner_run_cgi
    tracker.Client(tracker, self, env).main()
  File "/usr/lib/pymodules/python2.6/roundup/cgi/client.py", line 368, in main
    self.db.close()
  File "/usr/lib/pymodules/python2.6/roundup/backends/rdbms_common.py", line
1334, in close
    self.sql_close()
  File "/usr/lib/pymodules/python2.6/roundup/backends/back_sqlite.py", line 307,
in sql_close
    self.conn.close()
OperationalError: unable to close due to unfinalised statements

I added some logging to the Roundup-Django login integration code, and it
doesn't seem to be the cause of the problem.

For now, I will just push this forward to the future. It would be good to be
find out what the minimal adjustments to stock Roundup you need to make to be
able to reproduce this bug. I can't seem to reproduce it on other Roundup
instances I find lying around the web.</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2229">msg2229 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2011-07-19.13:03:04</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>egor83, you asked for more clarification on IRC (although I missed you).

What I'm trying to say is that /bugs/ is not handled by the main openhatch code
that we store on Gitorious at <a href="http://gitorious.org/openhatch/oh-mainline">http://gitorious.org/openhatch/oh-mainline</a> .

It's handled by Roundup's code, which we happen to have installed on the server
through the Debian package.

So the bug fix actually would occur in a different codebase than the main
OpenHatch one, and I know the Roundup codebase less well. That's what I mean by
"it's in Roundup".

Sorry that that was unclear. Do my earlier remarks make more sense now?</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2226">msg2226 (view)</a></th>
   <th>Author: paulproteus</th>
   <th>Date: 2011-07-17.21:17:02</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>It is bitesize, except that it's in Roundup, which is somewhat hard to
understand. I figure that people shouldn't be directed to it as newcomers unless
they understand that.

But if you *do* understand that, then yes!</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2224">msg2224 (view)</a></th>
   <th>Author: egor83</th>
   <th>Date: 2011-07-17.21:05:36</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>I think it's bitesize, isn't it?</pre>
   </td>
  </tr>
 
 
  <tr>
   <th><a href="msg2181">msg2181 (view)</a></th>
   <th>Author: jesstess</th>
   <th>Date: 2011-07-12.20:03:48</th>
   <th>
    
   </th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    <pre>If I visit <a href="http://openhatch.org/bugs/foo">http://openhatch.org/bugs/foo</a> while not logged in, I get a 400 and

"Tue Jul 12 19:59:05 2011: An error occurred. Please check the server log for more infomation."

Visiting logged in, I get

"""
Error response

Error code 404.

Message: /bugs/foo.

Error code explanation: 404 = Nothing matches the given URI.
"""

They should probably both get a 404, and better yet get a nice styled page for it, a la 
<a href="http://openhatch.org/foo.">http://openhatch.org/foo.</a></pre>
   </td>
  </tr>
 
</table>

<table class="history"><tr><th colspan="4" class="header">
History
</th></tr><tr>
<th>Date</th>
<th>User</th>
<th>Action</th>
<th>Args</th>
</tr>
<tr><td>2013-03-19&nbsp;04:13:56</td><td>Coffeeman</td><td>set</td><td>messages:
  + <a href="msg3619">msg3619</a></td></tr>
<tr><td>2011-09-01&nbsp;04:44:16</td><td>paulproteus</td><td>set</td><td>nosy:
  + <a href="user34">pythonian4000</a><br />messages:
  + <a href="msg2446">msg2446</a><br />milestone: <a href="milestone10">0.11.07</a> -> <a href="milestone1">later</a></td></tr>
<tr><td>2011-07-19&nbsp;13:03:05</td><td>paulproteus</td><td>set</td><td>messages:
  + <a href="msg2229">msg2229</a></td></tr>
<tr><td>2011-07-17&nbsp;21:17:03</td><td>paulproteus</td><td>set</td><td>messages:
  + <a href="msg2226">msg2226</a></td></tr>
<tr><td>2011-07-17&nbsp;21:05:37</td><td>egor83</td><td>set</td><td>status: unread -> chatting<br />nosy:
  + <a href="user136">egor83</a><br />messages:
  + <a href="msg2224">msg2224</a></td></tr>
<tr><td>2011-07-12&nbsp;20:03:49</td><td>jesstess</td><td>create</td><td></td></tr>
</table>

</div>

</td>
</tr>

</table>



</body>
</html>

<!-- SHA: cef943195fefd743431d22c020eef27edd6255e1 -->
